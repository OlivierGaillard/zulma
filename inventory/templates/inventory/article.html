{% extends "base.html" %}
{% load static %}
{% load i18n %}
{% load thumbnail %}
{% block content %}
<div class="container">
  <h3>{% trans "2ème étape" %}  <small>{% trans "step-by-step guide" %}</small></h3>
  <h4>{% trans "Ajouter l'article au panier" %}</h4>


  <ol>
    <li>{% trans "Est-ce le bon article" %}? {% trans "Au besoin cliquez sur l'image pour l'agrandir" %}</li>
    <li>{% trans "Ensuite ajoutez le au panier d'achat" %}</li>
  </ol>

    <div class="progress">
      <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100"
         style="width:40%">
    40% {% trans "de la vente achevée" %}
      </div>
    </div>



  <h2>{% trans "Détails de l'article" %}</h2>

  <table class="table">
    <tbody>
      <tr>
        <th>{% trans "ID" %}</th>
        <td>{{article.pk}}</td>
      </tr>

      <tr>
        <th>{% trans "Branch" %}</th>
        <td>{{article.branch|default_if_none:"n.d."}}</td>
      </tr>


      <tr>
        <th>{% trans "Date d'arrivage" %}</th><td>{{article.arrival.date_arrivee|date:"d.m.Y"}}</td>
      </tr>

      <tr>
          <th>{% trans "Nom de l'arrivage" %}</th>
        <td>{{article.arrival.nom}}</td>
      </tr>

      <tr>
          <th>{% trans "Category" %}</th>
        <td>{{article.category|default_if_none:"n.d."}}</td>
      </tr>

      <tr>
        <th>{% trans "Nom" %}</th>
        <td>{{article.name|default_if_none:"n.d."}}</td>
      </tr>
      <tr>
        <th>{% trans "Creation date" %}</th>
        <td>{{article.date_added|default_if_none:"n.d."}}</td>
      </th>
      <tr>
          <th>{% trans "Soldé?" %}</th>
          <td>{{article.get_solde_display}}</td>
      </tr>
      <tr>
        <th>{% trans "Initial quantity" %}</th>
        <td>{{article.initial_quantity}}</td>
      </tr>
      <tr>
        <th>{% trans "Quantité en stock" %}</th>
        <td>{{article.quantity}}</td>
      </tr>
      <tr>
        <th>{% trans "Pertes" %}</th>
        <td>{{article.losses}}</td>
      </tr>
      <tr>
        <th>{% trans "Montant des pertes" %}</th>
        <td>{{article.amount_losses}}</td>
      </tr>

      <tr>
        <th>{% trans "Prix d'achat" %}</th>
        <td>{{article.purchasing_price|default_if_none:"n.d."}}</td>
      </tr>
      <tr>
        <th>{% trans "Prix de vente" %}</th>
        <td>{{article.selling_price|default_if_none:"n.d."}}</td>
      </tr>
      <tr>
        <th>{% trans "Description" %}</th>
        <td>{{article.description|default_if_none:"n.d."}}</td>
      </tr>
      <tr>
        <th>{% trans "Notes" %}</th>
        <td>{{article.notes|default_if_none:"n.d."}}</td>
      </tr>
    </tbody>
  </table>


<table class="table-condensed">
    <tr>
        <td>
    <form method="POST" action="{% url "cart:add_item" article.pk  %}">
       {% csrf_token %}
            {% if article.quantity > 0 %}
            <input type="submit" class="btn btn-primary" value="{% trans "Ajouter au panier" %}"/>
            {% else %}
            <input type="text" class="btn btn-danger disabled" value="{% trans 'Stock épuisé!' %}"/>
            {% endif %}
    </form>
        </td>

    {% if article_in_cart %}
    <td>
    <form method="POST" action="{% url "cart:remove_item" article.pk  %}">
       {% csrf_token %}
       <input type="submit" class="btn btn-warning" value="{% trans 'Supprimer du panier' %}"/>
    </form>

    </td>
    {% endif %}

    <td>
      <a href="/inventory/article_update/{{article.pk}}"><button class="btn btn-warning" >{% trans "Modifier" %}</button></a>
    </td>

    <td>
      {% if article.quantity > 0 %}
      <a href="/inventory/article_losses/{{article.pk}}"><button class="btn btn-warning" >{% trans "Pertes" %}</button></a>
      {% else %}
      <a href="/inventory/article_losses/{{article.pk}}"><button class="btn btn-warning disabled" >{% trans "Pertes" %}</button></a>
      {% endif %}
    </td>


    <td>
      <a href="/inventory/article_delete/{{article.pk}}"><button class="btn btn-danger" >{% trans "Effacer" %}</button></a>
    </td>

    <td>
      <a href="{% url 'inventory:articles' %}"><button class="btn btn-info" >{% trans "Back to articles's list" %}</button></a>
    </td>

    </tr>

</table>

<h3>{% trans "Illustration" %}</h3>

<div class="pic_container row">
    {% thumbnail article.photo  "450x450" crop="center" as thumbnail %}
  <div class="pic col-md-4 col-md-offset-4">
    <p>
        <a href="{{ article.photo.url }}" alt="{% trans 'image de ' %}{{article.name}}-ID: {{article.pk}}">
        <img src="{{ thumbnail.url }}" alt="The thumbnail" style="width: {{ thumbnail.width }}">
        </a>

    </p>
  </div>

   {% empty %}
   <div class="pic col-md-2">
      {% trans "Sorry no picture available" %}
   </div>
    {% endthumbnail %}

</div>

</div>

<!--<p>{% trans "Ajouter une <strong>image</strong> en cliquant" %} <a href="/inventory/upload_pic/{{article.pk}}">{% trans "ici" %}</a>.</p>-->





{% endblock %}

{% block footernav %}
<p><a href="{% url 'inventory:articles' %}"><button class="btn btn-info" >{% trans "Back to articles's list" %}</button></a> </p>

{% endblock %}
